<link rel="stylesheet" href="{{basePath}}/dist/codemirror/codemirror.css">
<script src="{{basePath}}/dist/codemirror/codemirror.js"></script>
<script src="{{basePath}}/dist/codemirror/javascript.js"></script>

 <div class="content pure-u-3-5">

     <h1>Upload</h1> 
     <form action="" method="post">
         <h4>Code title</h4>     
         {% if data.error.titleError %}
            <div class="error">{{ data.error.titleError }}</div>
         {% endif %}              
         <input type="text" class='input inputField' name="title" value="" onfocus="if(this.value===this.defaultValue)this.value=''" onblur="if(this.value==='')this.value=this.defaultValue">
         
        <br><br><br><br>

        <h5 class="dropDownHeader"> Language:</h5>
        {% if data.error.langError %}
            <div class="error">{{ data.error.langError }}</div>
        {% endif %}
        <select class="dropdown" name='language'>
            {% for lang in data.languages %}
             <option value="{{lang.language_ID}}">{{lang.language_name}}</option>
            {% endfor %}
        </select> 

        <br>
        <br>

        <h5 class="dropDownHeader">Framework:</h5>
        
        <select class="dropdown" name='framework'>
             {% for frame in data.frameworks %}
             <option value="{{frame.Framework_ID}}">{{frame.Framework_name}}</option>
            {% endfor %}
        </select>

        <br>
        <br>
        <br>
    
        <h4>Code Snippet:</h4>

        {% if data.error.codeError %}
            <div class="error">{{ data.error.codeError }}</div>
        {% endif %}
    
        <textarea name="code" id="code" cols="30" rows="10"></textarea>

        
        <h4 class="codeDescription">Description:</h4>
        {% if data.error.descriptionError %}
            <div class="error">{{ data.error.descriptionError }}</div>
        {% endif %}
        <textarea class="codeDescriptionInput" rows="5" name='description' onfocus="if(this.value===this.defaultValue)this.value=''" style='float:left;' onblur="if(this.value==='')this.value=this.defaultValue"></textarea>
                      

        <input id='submit' type="submit" value="Submit" name='submit' class='styleButton'>
 
    </form>
</div>
                
<script>
    var code = document.getElementById('code');
    var editor = CodeMirror.fromTextArea(code, {
        lineNumbers: true,
        mode:  "javascript"
    });

    var submit = document.getElementById('submit');
    submit.addEventListener('click', function(){
        console.log('submit!');
        console.log(editor.getValue());
        code.value = editor.getValue();
    });


</script>